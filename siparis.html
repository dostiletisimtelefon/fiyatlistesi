<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>SipariÅŸ SayfasÄ±</title>
<style>
:root{--bg:#0f1320;--ink:#0f1a2a;--accent:#25D366;--radius:16px;}
html,body{height:auto;max-width:100%;overflow-x:hidden;}
body{
  margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;
  background:
    radial-gradient(1200px 600px at 80% -10%,rgba(46,111,242,.15),transparent 60%),
    radial-gradient(900px 500px at -10% 20%,rgba(37,211,102,.1),transparent 60%),
    var(--bg);
  color:var(--ink);
  display:flex;justify-content:center;align-items:flex-start;
  padding:16px;box-sizing:border-box;
  min-height:100svh;min-height:100dvh;
}
.shell{
  width:min(1124px,96%);
  background:linear-gradient(180deg,#fff,#fafbff);
  border-radius:var(--radius);
  box-shadow:0 8px 32px rgba(0,0,0,.08);
  border:1px solid #e9eef6;
  display:flex;flex-direction:column;
  height:100svh;height:100dvh;overflow:auto;
}
.hero{padding:12px;border-bottom:1px solid #eef1f6;flex-shrink:0;}
.hero img{width:100%;height:auto;max-height:210px;object-fit:contain;border-radius:14px;display:block;}

.inner{padding:18px;display:grid;gap:16px;}
.product-card{border:1px solid #e9eef6;border-radius:14px;padding:16px;background:#fff;}
.product-card h3{font-size:20px;margin:0 0 6px;}
.product-card p{font-size:17px;margin:4px 0;}
.price{color:#e25342;font-weight:700}

.specs-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:10px;
  background:#fff;border:1px solid #e9eef6;border-radius:14px;padding:10px;
}
.spec-item{display:flex;align-items:center;gap:8px;background:#f9fafc;border-radius:8px;padding:6px 8px;font-size:14px;}
.spec-item i{font-size:18px;}
.spec-label{font-weight:600;}
.spec-value{display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;max-width:42ch;}

.people{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
.personel{
  display:grid;grid-template-columns:72px 1fr;align-items:center;gap:12px;
  border:1px solid #e9eef6;border-radius:12px;padding:12px;background:#fff;
}
.brand-square{width:72px;height:72px;border:1px solid #e9eef6;border-radius:10px;display:grid;place-items:center;overflow:hidden;padding:8px;background:#fff}
.brand-square img{width:100%;height:100%;object-fit:contain}
.info{text-align:center}
.personel h2{font-size:18px;margin:0;font-weight:700}
.phone-number{font-size:16px;color:#39455a;margin:6px 0 10px}
.whatsapp-button{background:var(--accent);color:#fff;font-size:14.5px;padding:7px 12px;border-radius:9px;display:inline-flex;align-items:center;gap:8px;text-decoration:none;box-shadow:0 2px 6px rgba(37,211,102,.25);}
.whatsapp-button img{width:18px;height:18px}

.brands{border-top:1px solid #eef1f6;background:#fbfcff;padding:10px;}
.brand-row{display:flex;justify-content:center;align-items:center;gap:8px;margin-bottom:8px;}
.brand-row h4{font-size:13px;margin:0;font-weight:700;}
.logo-slider{overflow:hidden;width:100%;}
.logo-track{display:flex;gap:28px;width:max-content;animation:scroll 18s linear infinite;}
.logo-slider img{height:24px;}
@keyframes scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}

.foot{display:flex;justify-content:space-between;align-items:center;gap:12px;border-top:1px solid #eef1f6;background:#ffffffd8;backdrop-filter:blur(5px);padding:10px 14px;font-size:13px;color:#5b677a;flex-shrink:0;}

/* Mobil */
@media(max-width:768px){
  .inner{padding:12px;gap:12px;}
  .product-card{padding:12px;}
  .product-card h3{font-size:18px;}
  .product-card p{font-size:15px;}
  .people{grid-template-columns:1fr;}
  .personel{grid-template-columns:64px 1fr;padding:10px;}
  .brand-square{width:64px;height:64px;}
  .specs-grid{gap:8px;}
  .spec-item{font-size:13.5px;padding:5px 6px;}
  .spec-value{-webkit-line-clamp:2;max-width:32ch;}
}

/* ---------- ULTRA (OTOMATIK/parametre ile) : personel saklanmaz ---------- */
.shell.ultra .hero{padding:8px 8px 0}
.shell.ultra .hero img{max-height:128px;border-radius:12px}
.shell.ultra .inner{padding:10px;gap:10px}
.shell.ultra .product-card{padding:10px;border-radius:12px}
.shell.ultra .product-card h3{font-size:16px;margin-bottom:4px}
.shell.ultra .product-card p{font-size:14px}
.shell.ultra .specs-grid{gap:6px;padding:8px 10px}
.shell.ultra .spec-item{padding:4px 6px;font-size:12.5px}
.shell.ultra .spec-item i{font-size:16px}
.shell.ultra .spec-value{-webkit-line-clamp:1;max-width:26ch}
.shell.ultra .people{gap:10px}
.shell.ultra .personel{grid-template-columns:56px 1fr;padding:8px;border-radius:10px}
.shell.ultra .brand-square{width:56px;height:56px;padding:6px}
.shell.ultra .personel h2{font-size:14px}
.shell.ultra .phone-number{font-size:12.5px;margin:4px 0 6px}
.shell.ultra .whatsapp-button{padding:5px 8px;font-size:12px}
.shell.ultra .brands{padding:6px}
.shell.ultra .logo-track{gap:16px}
.shell.ultra .logo-slider img{height:16px}
.shell.ultra .foot{padding:6px 10px;font-size:11px}

/* iOS gÃ¼vence */
@supports (-webkit-touch-callout: none){
  html, body{ min-height:-webkit-fill-available; }
  .shell{ height:-webkit-fill-available; }
}
</style>
</head>
<body>
<div class="shell" id="shell">
  <div class="hero">
    <img src="https://raw.githubusercontent.com/dostiletisimtelefon/fiyatlistesi/refs/heads/main/dostyenilogo.jpg" alt="Dost Ä°letiÅŸim">
  </div>

  <div class="inner">
    <div class="product-card">
      <h3 id="product_name">ÃœrÃ¼n :</h3>
      <p id="product_features" class="price">Ram Ve HafÄ±za :</p>
      <p class="price" id="product_price">Fiyat:</p>
    </div>

    <div class="specs-grid" id="specs_grid"></div>

    <div class="people">
      <div class="personel">
        <div class="brand-square"><img src="https://raw.githubusercontent.com/dostiletisimtelefon/fiyatlistesi/refs/heads/main/dost.jpg" alt="Dost Ä°letiÅŸim"></div>
        <div class="info">
          <h2>Miskin Adak</h2>
          <p class="phone-number">0535 641 9868</p>
          <a id="whatsappButton1" href="#" class="whatsapp-button" target="_blank" rel="noopener">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="">WhatsApp ile SipariÅŸ Ver
          </a>
        </div>
      </div>
      <div class="personel">
        <div class="brand-square"><img src="https://raw.githubusercontent.com/dostiletisimtelefon/fiyatlistesi/refs/heads/main/dost.jpg" alt="Dost Ä°letiÅŸim"></div>
        <div class="info">
          <h2>Murat UÄŸur</h2>
          <p class="phone-number">0536 997 3191</p>
          <a id="whatsappButton2" href="#" class="whatsapp-button" target="_blank" rel="noopener">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="">WhatsApp ile SipariÅŸ Ver
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="brands">
    <div class="brand-row"><h4>Ã‡alÄ±ÅŸtÄ±ÄŸÄ±mÄ±z Markalar</h4></div>
    <div class="logo-slider"><div class="logo-track">
      <img src="https://upload.wikimedia.org/wikipedia/commons/archive/6/61/20210930181848%21Samsung_old_logo_before_year_2015.svg" alt="Samsung">
      <img src="https://wp.logos-download.com/wp-content/uploads/2016/05/Xiaomi_Logo_2019-700x211.png" alt="Xiaomi">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/e0/Infinix_logo.svg" alt="Infinix">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Tecno_Mobile_logo.svg" alt="Tecno">
      <img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg" alt="Google">
      <img src="https://cdn.tradetracker.net/cz/campaign_image_rectangle/30034.png" alt="Redmagic">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/f6/Nubia_logo.svg" alt="Nubia">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/f8/OP_LU_Reg_1L_RGB_red_copy-01.svg" alt="OnePlus">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/ea/Apple_iPhone.svg" alt="iPhone">
    </div></div>
  </div>

  <div class="foot">
    <span>GÃ¼venli ve hÄ±zlÄ± sipariÅŸ</span>
    <span>Fiyatlar kura gÃ¶re deÄŸiÅŸebilir</span>
  </div>
</div>

<script>
/* ---- Viewport: gerÃ§ek yÃ¼kseklik + ultra modu ---- */
function applyRealHeight(){
  const el=document.getElementById('shell'); if(!el) return;
  const h = (window.visualViewport && window.visualViewport.height) ? Math.floor(window.visualViewport.height) : window.innerHeight;
  el.style.height = h + 'px';
}
function enableUltra(){
  const q=new URL(location.href).searchParams;
  if(q.get('ultra')==='1'){ document.querySelector('.shell')?.classList.add('ultra'); return; }
  const h=(window.visualViewport?.height||window.innerHeight);
  if(h<700) document.querySelector('.shell')?.classList.add('ultra'); // kÄ±sa ekranlarda otomatik
}
['resize','orientationchange','scroll'].forEach(e=>window.addEventListener(e,applyRealHeight,{passive:true}));
if(window.visualViewport){
  window.visualViewport.addEventListener('resize',applyRealHeight,{passive:true});
  window.visualViewport.addEventListener('scroll',applyRealHeight,{passive:true});
}

/* ---- URL okuma ve formatlama ---- */
function qpRaw(n){ return new URL(location.href).searchParams.get(n) || ""; }
function qpDec(n){
  let v=qpRaw(n).replace(/\+/g," ").trim();
  for(let i=0;i<3;i++){ try{ if(/%[0-9a-fA-F]{2}/.test(v)) v=decodeURIComponent(v); }catch(e){break;} }
  return v.trim();
}
function isSoldOut(v){return String(v||"").toLowerCase().includes("tÃ¼kendi");}
function parseLocalizedNumber(v) {
  if (!v) return NaN;
  v = String(v).trim();
  // TÃ¼rkÃ§e binlik (.) ve ondalÄ±k (,) dÃ¼zenini dÃ¼zelt
  if (/^\d{1,3}(\.\d{3})+(,\d+)?$/.test(v)) v = v.replace(/\./g, '').replace(',', '.');
  // Ä°ngilizce format 1,234.56 â†’ 1234.56
  else if (/^\d{1,3}(,\d{3})+(\.\d+)?$/.test(v)) v = v.replace(/,/g, '');
  else v = v.replace(',', '.'); // karÄ±ÅŸÄ±k durumlar
  return parseFloat(v);
}

function formatUSD(v) {
  if (!v) return "";
  const n = parseLocalizedNumber(v);
  if (isNaN(n)) return String(v);
  return n.toLocaleString("tr-TR", {
    minimumFractionDigits: 0,
    maximumFractionDigits: (n % 1 === 0 ? 0 : 3)
  }) + " $";
}

function formatTL(v) {
  if (!v) return "";
  const n = parseLocalizedNumber(v);
  if (isNaN(n)) return String(v);
  return n.toLocaleString("tr-TR", {
    minimumFractionDigits: 0,
    maximumFractionDigits: (n % 1 === 0 ? 0 : 3)
  }) + " TL";
}


/* ---- Specs ayrÄ±ÅŸtÄ±rma ---- */
function normalizeKey(s){return (s||"").toLocaleLowerCase("tr").replaceAll("Ä±","i").replaceAll("Ä°","i").replaceAll("ÅŸ","s").replaceAll("Ã§","c").replaceAll("ÄŸ","g").replaceAll("Ã¶","o").replaceAll("Ã¼","u").replace(/[^\p{L}]/gu,"").trim();}
const SPEC_KEYS_TR=["Ä°ÅŸlemci","Ekran","Kamera","Performans","Gpu","Batarya","Boyutlar","SensÃ¶rler","Sensorler","CPU","GPU","Display","Camera","Battery","Dimensions"];
const SPEC_RE=new RegExp("("+SPEC_KEYS_TR.join("|")+")\\s*:\\s*([^]+?)(?=(?:,\\s*(?:"+SPEC_KEYS_TR.join("|")+")\\s*:)|$)","gi");
function parseSpecs(raw){
  const out={}; if(!raw) return out; let m;
  while((m=SPEC_RE.exec(raw))!==null){
    const kRaw=m[1]||""; let v=(m[2]||"").trim().replace(/^[,\s]+|[,\s]+$/g,"").replace(/\s+/g," ");
    let k=normalizeKey(kRaw);
    if(k.includes("islemci")||k.includes("soc")||k.includes("processor")||k==="cpu") k="islemci";
    else if(k.includes("ekran")||k.includes("display")) k="ekran";
    else if(k.includes("kamera")||k.includes("camera")) k="kamera";
    else if(k==="gpu"||k.includes("grafik")) k="gpu";
    else if(k.includes("batarya")||k.includes("pil")||k.includes("battery")) k="batarya";
    else if(k.includes("boyut")||k.includes("dimension")) k="boyutlar";
    out[k]=v;
  } return out;
}
function shortenDimensions(v){return v?String(v).replace(/\s*\([^)]*\)\s*$/,"").trim():v;}
function ellipsize(s,m){s=String(s||"").trim();return s.length>m?s.slice(0,m-1)+"â€¦":s;}
function renderSpecsGrid(specs){
  const order=[
    {key:"islemci",icon:"ðŸ§ ",label:"Ä°ÅŸlemci"},
    {key:"ekran",icon:"ðŸ“±",label:"Ekran"},
    {key:"kamera",icon:"ðŸ“¸",label:"Kamera"},
    {key:"gpu",icon:"ðŸŽ®",label:"GPU"},
    {key:"batarya",icon:"ðŸ”‹",label:"Batarya"},
    {key:"boyutlar",icon:"ðŸ“",label:"Boyutlar"}];
  const grid=document.getElementById("specs_grid"); grid.innerHTML=""; let found=0;
  order.forEach(f=>{
    let val=specs[f.key]; if(!val) return;
    let clean=String(val).replace(/\s+/g," ").trim();
    if(f.key==="boyutlar") clean=shortenDimensions(clean);
    let display=clean;
    if(f.key==="islemci"||f.key==="ekran"||f.key==="kamera") display=ellipsize(display,40);
    if(f.key==="gpu"||f.key==="batarya") display=ellipsize(display,35);
    grid.insertAdjacentHTML("beforeend",
      `<div class="spec-item" title="${clean}">
         <i>${f.icon}</i>
         <span><span class="spec-label">${f.label}:</span> <span class="spec-value">${display}</span></span>
       </div>`);
    found++;
  });
  grid.hidden=!found;
}

/* ---- SayfayÄ± doldur ---- */
function hydrate(){
  const product=qpDec("product");
  const features=qpDec("features");
  const usdRaw=qpDec("price_usd");
  const tlRaw=qpDec("price_tl");
  const specsRaw=qpDec("specs");

  const sold=isSoldOut(usdRaw)||isSoldOut(tlRaw);
  const displayPrice= sold ? "TÃ¼kendi" : [formatUSD(usdRaw),formatTL(tlRaw)].filter(Boolean).join(" / ");

  document.getElementById("product_name").textContent="ÃœrÃ¼n : "+(product||"");
  document.getElementById("product_features").textContent="Ram Ve HafÄ±za : "+(features||"");
  document.getElementById("product_price").textContent="Fiyat: "+displayPrice;

  renderSpecsGrid(parseSpecs(specsRaw));

  const lines=["SipariÅŸ vermek istiyorum."];
  if(product)  lines.push(`ÃœrÃ¼n: ${product}`);
  if(features) lines.push(`Ram Ve HafÄ±za: ${features}`);
  if(!sold){
    const u=usdRaw?formatUSD(usdRaw):""; const t=tlRaw?formatTL(tlRaw):"";
    if(u) lines.push(`Fiyat (USD): ${u}`); if(t) lines.push(`Fiyat (TL): ${t}`);
  }else{ lines.push("Durum: TÃ¼kendi"); }
  const enc=encodeURIComponent(lines.join("\n"));
  document.getElementById("whatsappButton1").href="https://wa.me/905356419868?text="+enc;
  document.getElementById("whatsappButton2").href="https://wa.me/905369973191?text="+enc;
}

/* --- decode helper used above --- */
function qpDec(n){
  let v=qpRaw(n).replace(/\+/g," ").trim();
  for(let i=0;i<3;i++){ try{ if(/%[0-9a-fA-F]{2}/.test(v)) v=decodeURIComponent(v);}catch(e){break;} }
  return v.trim();
}

document.addEventListener("DOMContentLoaded", ()=>{
  applyRealHeight();
  enableUltra();   // kÄ±sa ekranlarda otomatik kÃ¼Ã§Ã¼lt
  hydrate();
  setTimeout(applyRealHeight,60);
});
</script>
</body>
</html>
